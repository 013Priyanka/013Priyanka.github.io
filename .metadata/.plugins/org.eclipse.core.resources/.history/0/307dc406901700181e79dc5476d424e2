package com.dtproject.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

import com.dtproject.model.User;
import com.dtproject.service.UserService;

@Controller
public class UserController 
{
	
	@Autowired
	UserService userService;
	
  @RequestMapping("/registerUser")
  public ModelAndView registerUser()
  {
	  ModelAndView mv=new ModelAndView();
	  User user=new User();
	  mv.addObject("user",user);
	  mv.setViewName("register");
	  return mv;
	  
  }
  
  @RequestMapping(value="/saveUser",method=RequestMethod.POST)
  public String saveUser(@ModelAttribute("user") User user)
  {
	 userService.saveUser(user); 
	return "redirect:/home";
  }
  
  @RequestMapping("/login")
public ModelAndView login(@RequestParam(value="error",required=false)String error,
			@RequestParam(value="logout",required=false)String logout) {
		ModelAndView mv = new ModelAndView();
		if(error==null)
			mv.addObject("error", "Invalid UserName or password... please enter valid username or password");
		
		if(logout!=null)
			mv.addObject("logout", "Logged Out Successfully");
		
		mv.setViewName("login");
		return mv;
	}
}
